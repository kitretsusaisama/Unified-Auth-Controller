warning: /app/crates/auth-platform/Cargo.toml: file `/app/crates/auth-platform/src/lib.rs` found to be present in multiple build targets:
  * `lib` target `auth_platform`
  * `integration-test` target `lib`
    Checking auth-db v0.1.0 (/app/crates/auth-db)
    Checking auth-extension v0.1.0 (/app/crates/auth-extension)
    Checking auth-protocols v0.1.0 (/app/crates/auth-protocols)
    Checking auth-audit v0.1.0 (/app/crates/auth-audit)
warning: unused import: `RoleScope`
 --> crates/auth-db/src/repositories/authorization/role_repository.rs:3:31
  |
3 | use auth_core::models::{Role, RoleScope};
  |                               ^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `std::collections::HashMap`
 --> crates/auth-db/src/repositories/authorization/role_repository.rs:7:5
  |
7 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^

error[E0277]: the trait bound `Vec<std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:84:39
    |
 84 |         let rec = sqlx::query_as::<_, Role>(
    |                                       ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `Vec<u8>` implements `sqlx::Decode<'_, MySql>`
              `Vec<u8>` implements `sqlx::Decode<'_, Sqlite>`
              `Vec<u8>` implements `sqlx::Decode<'_, sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `Vec<std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:84:39
    |
 84 |         let rec = sqlx::query_as::<_, Role>(
    |                                       ^^^^ the trait `Type<_>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `Vec<u8>` implements `Type<MySql>`
              `Vec<u8>` implements `Type<Sqlite>`
              `Vec<u8>` implements `Type<sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:84:39
    |
 84 |         let rec = sqlx::query_as::<_, Role>(
    |                                       ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:84:39
    |
 84 |         let rec = sqlx::query_as::<_, Role>(
    |                                       ^^^^ the trait `Type<_>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:84:39
    |
 84 |         let rec = sqlx::query_as::<_, Role>(
    |                                       ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `sqlx::Decode<'_, _>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:84:39
    |
 84 |         let rec = sqlx::query_as::<_, Role>(
    |                                       ^^^^ the trait `Type<_>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `Type<_>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0599]: the method `fetch_optional` exists for struct `QueryAs<'_, _, Role, _>`, but its trait bounds were not satisfied
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:94:10
   |
84 |           let rec = sqlx::query_as::<_, Role>(
   |  ___________________-
85 | |             r#"
86 | |             SELECT id, tenant_id, name, description, parent_role_id, is_system_role,
87 | |                    NULL as permissions, constraints, organization_id, scope, metadata, created_at, updated_at
...  |
93 | |         .bind(tenant_id.to_string())
94 | |         .fetch_optional(&self.pool)
   | |         -^^^^^^^^^^^^^^ method cannot be called on `QueryAs<'_, _, Role, _>` due to unsatisfied trait bounds
   | |_________|
   |
   |
  ::: /app/crates/auth-core/src/models/role.rs:8:1
   |
 8 |   pub enum RoleScope {
   |   ------------------ doesn't satisfy `RoleScope: Type<_>` or `RoleScope: sqlx::Decode<'_, _>`
...
15 |   pub struct Role {
   |   --------------- doesn't satisfy `Role: FromRow<'r, _>`
   |
   = note: the following trait bounds were not satisfied:
           `Vec<std::string::String>: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `Vec<std::string::String>: Type<_>`
           which is required by `Role: FromRow<'r, _>`
           `RoleScope: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `RoleScope: Type<_>`
           which is required by `Role: FromRow<'r, _>`
           `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `HashMap<std::string::String, std::string::String>: Type<_>`
           which is required by `Role: FromRow<'r, _>`

error[E0282]: type annotations needed for `Result<std::option::Option<Role>, _>`
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:84:13
    |
 84 |         let rec = sqlx::query_as::<_, Role>(
    |             ^^^
...
100 |             Err(e) => Err(AuthError::DatabaseError { message: e.to_string() }),
    |                                                               - type must be known at this point
    |
help: consider giving `rec` an explicit type, where the placeholders `_` are specified
    |
 84 |         let rec: Result<_, E> = sqlx::query_as::<_, Role>(
    |                ++++++++++++++

Some errors have detailed explanations: E0277, E0282, E0599.
For more information about an error, try `rustc --explain E0277`.
warning: `auth-db` (lib) generated 2 warnings
error: could not compile `auth-db` (lib) due to 8 previous errors; 2 warnings emitted
