warning: /app/crates/auth-platform/Cargo.toml: file `/app/crates/auth-platform/src/lib.rs` found to be present in multiple build targets:
  * `lib` target `auth_platform`
  * `integration-test` target `lib`
    Checking auth-core v0.1.0 (/app/crates/auth-core)
    Checking auth-db v0.1.0 (/app/crates/auth-db)
    Checking auth-extension v0.1.0 (/app/crates/auth-extension)
    Checking auth-protocols v0.1.0 (/app/crates/auth-protocols)
    Checking auth-audit v0.1.0 (/app/crates/auth-audit)
error: set `DATABASE_URL` to use query macros online, or run `cargo sqlx prepare` to update the query cache
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:22:9
   |
22 | /         sqlx::query!(
23 | |             r#"
24 | |             INSERT INTO roles (
25 | |                 id, tenant_id, organization_id, name, description,
...  |
41 | |             role.updated_at
42 | |         )
   | |_________^
   |
   = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error: set `DATABASE_URL` to use query macros online, or run `cargo sqlx prepare` to update the query cache
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:71:22
   |
71 |           let result = sqlx::query!(
   |  ______________________^
72 | |             "DELETE FROM roles WHERE id = ? AND tenant_id = ?",
73 | |             id.to_string(),
74 | |             tenant_id.to_string()
75 | |         )
   | |_________^
   |
   = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error: set `DATABASE_URL` to use query macros online, or run `cargo sqlx prepare` to update the query cache
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:87:19
   |
87 |           let rec = sqlx::query!(
   |  ___________________^
88 | |             r#"
89 | |             SELECT id, tenant_id, organization_id, name, description,
90 | |                    parent_role_id, is_system_role, scope, metadata, constraints,
...  |
96 | |             tenant_id.to_string()
97 | |         )
   | |_________^
   |
   = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error: set `DATABASE_URL` to use query macros online, or run `cargo sqlx prepare` to update the query cache
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:132:9
    |
132 | /         sqlx::query!(
133 | |             "INSERT INTO role_permissions (role_id, permission_id) VALUES (?, ?)",
134 | |             role_id.to_string(),
135 | |             permission_id.to_string()
136 | |         )
    | |_________^
    |
    = note: this error originates in the macro `$crate::sqlx_macros::expand_query` which comes from the expansion of the macro `sqlx::query` (in Nightly builds, run with -Z macro-backtrace for more info)

error[E0407]: method `find_by_tenant` is not a member of trait `RoleStore`
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:144:5
    |
144 | /     async fn find_by_tenant(&self, tenant_id: Uuid) -> Result<Vec<Role>, AuthError> {
145 | |         self.list(tenant_id).await
146 | |     }
    | |_____^ not a member of trait `RoleStore`

error[E0407]: method `find_by_name` is not a member of trait `RoleStore`
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:148:5
    |
148 |       async fn find_by_name(&self, tenant_id: Uuid, name: &str) -> Result<Option<Role>, AuthError> {
    |       ^        ------------ help: there is an associated function with a similar name: `find_by_id`
    |  _____|
    | |
149 | |         // Implement
150 | |         Ok(None)
151 | |     }
    | |_____^ not a member of trait `RoleStore`

warning: unused import: `std::collections::HashMap`
 --> crates/auth-db/src/repositories/authorization/role_repository.rs:7:5
  |
7 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

error[E0277]: the trait bound `Vec<std::string::String>: Encode<'_, _>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:34:15
   |
34 |         .bind(role.permissions.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Encode<'_, _>` is not implemented for `Vec<std::string::String>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Encode<'q, DB>`:
             `Vec<u8>` implements `Encode<'_, MySql>`
             `Vec<u8>` implements `Encode<'_, Sqlite>`
             `Vec<u8>` implements `Encode<'_, sqlx::Any>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:32
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                ^^^^^^^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0277]: the trait bound `Vec<std::string::String>: Type<_>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:34:15
   |
34 |         .bind(role.permissions.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Type<_>` is not implemented for `Vec<std::string::String>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Type<DB>`:
             `Vec<u8>` implements `Type<MySql>`
             `Vec<u8>` implements `Type<Sqlite>`
             `Vec<u8>` implements `Type<sqlx::Any>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:49
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                                 ^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0277]: the trait bound `std::option::Option<HashMap<std::string::String, std::string::String>>: Encode<'_, _>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:35:15
   |
35 |         .bind(role.constraints.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Encode<'_, _>` is not implemented for `std::option::Option<HashMap<std::string::String, std::string::String>>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Encode<'q, DB>`:
             `std::option::Option<T>` implements `Encode<'_, MySql>`
             `std::option::Option<T>` implements `Encode<'_, Sqlite>`
             `std::option::Option<T>` implements `Encode<'_, sqlx::Any>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:32
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                ^^^^^^^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: Type<_>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:35:15
   |
35 |         .bind(role.constraints.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Type<_>` is not implemented for `HashMap<std::string::String, std::string::String>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Type<DB>`:
             `&T` implements `Type<DB>`
             `Box<[u8]>` implements `Type<MySql>`
             `Box<[u8]>` implements `Type<Sqlite>`
             `Box<str>` implements `Type<MySql>`
             `Box<str>` implements `Type<Sqlite>`
             `Cow<'_, str>` implements `Type<MySql>`
             `Cow<'_, str>` implements `Type<Sqlite>`
             `DateTime<Local>` implements `Type<MySql>`
           and 70 others
   = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `Type<_>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:49
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                                 ^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0308]: mismatched types
  --> crates/auth-db/src/repositories/role_repository.rs:52:75
   |
52 |         if let Some(perms) = req.permissions { current_role.permissions = sqlx::types::Json(perms); }
   |                                                ------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^ expected `Vec<String>`, found `Json<Vec<String>>`
   |                                                |
   |                                                expected due to the type of this binding
   |
   = note: expected struct `Vec<_>`
              found struct `Json<Vec<_>>`
help: try using a conversion method
   |
52 |         if let Some(perms) = req.permissions { current_role.permissions = sqlx::types::Json(perms).to_vec(); }
   |                                                                                                   +++++++++

error[E0308]: mismatched types
  --> crates/auth-db/src/repositories/role_repository.rs:53:74
   |
53 |         if let Some(cons) = req.constraints { current_role.constraints = sqlx::types::Json(cons); }
   |                                               ------------------------   ^^^^^^^^^^^^^^^^^^^^^^^ expected `Option<HashMap<String, String>>`, found `Json<HashMap<String, String>>`
   |                                               |
   |                                               expected due to the type of this binding
   |
   = note: expected enum `std::option::Option<HashMap<std::string::String, std::string::String>>`
            found struct `Json<HashMap<std::string::String, std::string::String>>`

error[E0277]: the trait bound `Vec<std::string::String>: Encode<'_, _>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:66:15
   |
66 |         .bind(current_role.permissions.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Encode<'_, _>` is not implemented for `Vec<std::string::String>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Encode<'q, DB>`:
             `Vec<u8>` implements `Encode<'_, MySql>`
             `Vec<u8>` implements `Encode<'_, Sqlite>`
             `Vec<u8>` implements `Encode<'_, sqlx::Any>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:32
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                ^^^^^^^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0277]: the trait bound `Vec<std::string::String>: Type<_>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:66:15
   |
66 |         .bind(current_role.permissions.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Type<_>` is not implemented for `Vec<std::string::String>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Type<DB>`:
             `Vec<u8>` implements `Type<MySql>`
             `Vec<u8>` implements `Type<Sqlite>`
             `Vec<u8>` implements `Type<sqlx::Any>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:49
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                                 ^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0277]: the trait bound `std::option::Option<HashMap<std::string::String, std::string::String>>: Encode<'_, _>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:67:15
   |
67 |         .bind(current_role.constraints.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Encode<'_, _>` is not implemented for `std::option::Option<HashMap<std::string::String, std::string::String>>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Encode<'q, DB>`:
             `std::option::Option<T>` implements `Encode<'_, MySql>`
             `std::option::Option<T>` implements `Encode<'_, Sqlite>`
             `std::option::Option<T>` implements `Encode<'_, sqlx::Any>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:32
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                ^^^^^^^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: Type<_>` is not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:67:15
   |
67 |         .bind(current_role.constraints.clone())
   |          ---- ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Type<_>` is not implemented for `HashMap<std::string::String, std::string::String>`
   |          |
   |          required by a bound introduced by this call
   |
   = help: the following other types implement trait `Type<DB>`:
             `&T` implements `Type<DB>`
             `Box<[u8]>` implements `Type<MySql>`
             `Box<[u8]>` implements `Type<Sqlite>`
             `Box<str>` implements `Type<MySql>`
             `Box<str>` implements `Type<Sqlite>`
             `Cow<'_, str>` implements `Type<MySql>`
             `Cow<'_, str>` implements `Type<Sqlite>`
             `DateTime<Local>` implements `Type<MySql>`
           and 70 others
   = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `Type<_>`
note: required by a bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`
  --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query.rs:81:49
   |
81 |     pub fn bind<T: 'q + Send + Encode<'q, DB> + Type<DB>>(mut self, value: T) -> Self {
   |                                                 ^^^^^^^^ required by this bound in `Query::<'q, DB, <DB as HasArguments<'q>>::Arguments>::bind`

error[E0277]: the trait bound `Vec<std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:87:29
    |
 87 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `Vec<u8>` implements `sqlx::Decode<'_, MySql>`
              `Vec<u8>` implements `sqlx::Decode<'_, Sqlite>`
              `Vec<u8>` implements `sqlx::Decode<'_, sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `Vec<std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:87:29
    |
 87 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `Vec<u8>` implements `Type<MySql>`
              `Vec<u8>` implements `Type<Sqlite>`
              `Vec<u8>` implements `Type<sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:87:29
    |
 87 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:87:29
    |
 87 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:87:29
    |
 87 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `sqlx::Decode<'_, _>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:87:29
    |
 87 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `Type<_>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0599]: the method `fetch_optional` exists for struct `QueryAs<'_, _, Role, _>`, but its trait bounds were not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:89:14
   |
87 | /         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
88 | |             .bind(id.to_string())
89 | |             .fetch_optional(&self.pool)
   | |             -^^^^^^^^^^^^^^ method cannot be called on `QueryAs<'_, _, Role, _>` due to unsatisfied trait bounds
   | |_____________|
   |
   |
  ::: /app/crates/auth-core/src/models/role.rs:8:1
   |
 8 |   pub enum RoleScope {
   |   ------------------ doesn't satisfy `RoleScope: Type<_>` or `RoleScope: sqlx::Decode<'_, _>`
...
15 |   pub struct Role {
   |   --------------- doesn't satisfy `Role: FromRow<'r, _>`
   |
   = note: the following trait bounds were not satisfied:
           `Vec<std::string::String>: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `Vec<std::string::String>: Type<_>`
           which is required by `Role: FromRow<'r, _>`
           `RoleScope: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `RoleScope: Type<_>`
           which is required by `Role: FromRow<'r, _>`
           `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `HashMap<std::string::String, std::string::String>: Type<_>`
           which is required by `Role: FromRow<'r, _>`

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/role_repository.rs:87:9
   |
87 | /         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE id = ?")
88 | |             .bind(id.to_string())
89 | |             .fetch_optional(&self.pool)
90 | |             .await
   | |__________________^ cannot infer type

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/role_repository.rs:91:23
   |
91 |             .map_err(|e| AuthError::DatabaseError { message: e.to_string() })
   |                       ^                                      - type must be known at this point
   |
help: consider giving this closure parameter an explicit type
   |
91 |             .map_err(|e: /* Type */| AuthError::DatabaseError { message: e.to_string() })
   |                        ++++++++++++

error[E0277]: the trait bound `Vec<std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:95:29
    |
 95 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `Vec<u8>` implements `sqlx::Decode<'_, MySql>`
              `Vec<u8>` implements `sqlx::Decode<'_, Sqlite>`
              `Vec<u8>` implements `sqlx::Decode<'_, sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `Vec<std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:95:29
    |
 95 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `Vec<u8>` implements `Type<MySql>`
              `Vec<u8>` implements `Type<Sqlite>`
              `Vec<u8>` implements `Type<sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:95:29
    |
 95 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:95:29
    |
 95 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:95:29
    |
 95 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `sqlx::Decode<'_, _>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:95:29
    |
 95 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `Type<_>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0599]: the method `fetch_all` exists for struct `QueryAs<'_, _, Role, _>`, but its trait bounds were not satisfied
  --> crates/auth-db/src/repositories/role_repository.rs:97:14
   |
95 | /         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
96 | |             .bind(tenant_id.to_string())
97 | |             .fetch_all(&self.pool)
   | |             -^^^^^^^^^ method cannot be called on `QueryAs<'_, _, Role, _>` due to unsatisfied trait bounds
   | |_____________|
   |
   |
  ::: /app/crates/auth-core/src/models/role.rs:8:1
   |
 8 |   pub enum RoleScope {
   |   ------------------ doesn't satisfy `RoleScope: Type<_>` or `RoleScope: sqlx::Decode<'_, _>`
...
15 |   pub struct Role {
   |   --------------- doesn't satisfy `Role: FromRow<'r, _>`
   |
   = note: the following trait bounds were not satisfied:
           `Vec<std::string::String>: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `Vec<std::string::String>: Type<_>`
           which is required by `Role: FromRow<'r, _>`
           `RoleScope: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `RoleScope: Type<_>`
           which is required by `Role: FromRow<'r, _>`
           `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>`
           which is required by `Role: FromRow<'r, _>`
           `HashMap<std::string::String, std::string::String>: Type<_>`
           which is required by `Role: FromRow<'r, _>`

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/role_repository.rs:95:9
   |
95 | /         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ?")
96 | |             .bind(tenant_id.to_string())
97 | |             .fetch_all(&self.pool)
98 | |             .await
   | |__________________^ cannot infer type

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/role_repository.rs:99:23
   |
99 |             .map_err(|e| AuthError::DatabaseError { message: e.to_string() })
   |                       ^                                      - type must be known at this point
   |
help: consider giving this closure parameter an explicit type
   |
99 |             .map_err(|e: /* Type */| AuthError::DatabaseError { message: e.to_string() })
   |                        ++++++++++++

error[E0277]: the trait bound `Vec<std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:103:29
    |
103 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `Vec<u8>` implements `sqlx::Decode<'_, MySql>`
              `Vec<u8>` implements `sqlx::Decode<'_, Sqlite>`
              `Vec<u8>` implements `sqlx::Decode<'_, sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `Vec<std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:103:29
    |
103 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `Vec<std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `Vec<u8>` implements `Type<MySql>`
              `Vec<u8>` implements `Type<Sqlite>`
              `Vec<u8>` implements `Type<sqlx::Any>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:103:29
    |
103 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `RoleScope: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:103:29
    |
103 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `RoleScope`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:103:29
    |
103 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
    |                             ^^^^ the trait `sqlx::Decode<'_, _>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `sqlx::Decode<'r, DB>`:
              `&'a str` implements `sqlx::Decode<'a, sqlx::Any>`
              `&'r JsonRawValue` implements `sqlx::Decode<'r, DB>`
              `&'r [u8]` implements `sqlx::Decode<'r, MySql>`
              `&'r [u8]` implements `sqlx::Decode<'r, Sqlite>`
              `&'r [u8]` implements `sqlx::Decode<'r, sqlx::Any>`
              `&'r str` implements `sqlx::Decode<'r, MySql>`
              `&'r str` implements `sqlx::Decode<'r, Sqlite>`
              `Box<[u8]>` implements `sqlx::Decode<'_, Sqlite>`
            and 71 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `sqlx::Decode<'_, _>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0277]: the trait bound `HashMap<std::string::String, std::string::String>: Type<_>` is not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:103:29
    |
103 |         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
    |                             ^^^^ the trait `Type<_>` is not implemented for `HashMap<std::string::String, std::string::String>`
    |
    = help: the following other types implement trait `Type<DB>`:
              `&T` implements `Type<DB>`
              `Box<[u8]>` implements `Type<MySql>`
              `Box<[u8]>` implements `Type<Sqlite>`
              `Box<str>` implements `Type<MySql>`
              `Box<str>` implements `Type<Sqlite>`
              `Cow<'_, str>` implements `Type<MySql>`
              `Cow<'_, str>` implements `Type<Sqlite>`
              `DateTime<Local>` implements `Type<MySql>`
            and 70 others
    = note: required for `std::option::Option<HashMap<std::string::String, std::string::String>>` to implement `Type<_>`
    = note: required for `Role` to implement `for<'r> FromRow<'r, _>`
note: required by a bound in `sqlx::query_as`
   --> /home/jules/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.7.4/src/query_as.rs:345:8
    |
342 | pub fn query_as<'q, DB, O>(sql: &'q str) -> QueryAs<'q, DB, O, <DB as HasArguments<'q>>::Arguments>
    |        -------- required by a bound in this function
...
345 |     O: for<'r> FromRow<'r, DB::Row>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `query_as`

error[E0599]: the method `fetch_optional` exists for struct `QueryAs<'_, _, Role, _>`, but its trait bounds were not satisfied
   --> crates/auth-db/src/repositories/role_repository.rs:106:14
    |
103 | /         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
104 | |             .bind(tenant_id.to_string())
105 | |             .bind(name)
106 | |             .fetch_optional(&self.pool)
    | |             -^^^^^^^^^^^^^^ method cannot be called on `QueryAs<'_, _, Role, _>` due to unsatisfied trait bounds
    | |_____________|
    |
    |
   ::: /app/crates/auth-core/src/models/role.rs:8:1
    |
  8 |   pub enum RoleScope {
    |   ------------------ doesn't satisfy `RoleScope: Type<_>` or `RoleScope: sqlx::Decode<'_, _>`
...
 15 |   pub struct Role {
    |   --------------- doesn't satisfy `Role: FromRow<'r, _>`
    |
    = note: the following trait bounds were not satisfied:
            `Vec<std::string::String>: sqlx::Decode<'_, _>`
            which is required by `Role: FromRow<'r, _>`
            `Vec<std::string::String>: Type<_>`
            which is required by `Role: FromRow<'r, _>`
            `RoleScope: sqlx::Decode<'_, _>`
            which is required by `Role: FromRow<'r, _>`
            `RoleScope: Type<_>`
            which is required by `Role: FromRow<'r, _>`
            `HashMap<std::string::String, std::string::String>: sqlx::Decode<'_, _>`
            which is required by `Role: FromRow<'r, _>`
            `HashMap<std::string::String, std::string::String>: Type<_>`
            which is required by `Role: FromRow<'r, _>`

error[E0282]: type annotations needed
   --> crates/auth-db/src/repositories/role_repository.rs:103:9
    |
103 | /         sqlx::query_as::<_, Role>("SELECT * FROM roles WHERE tenant_id = ? AND name = ?")
104 | |             .bind(tenant_id.to_string())
105 | |             .bind(name)
106 | |             .fetch_optional(&self.pool)
107 | |             .await
    | |__________________^ cannot infer type

error[E0282]: type annotations needed
   --> crates/auth-db/src/repositories/role_repository.rs:108:23
    |
108 |             .map_err(|e| AuthError::DatabaseError { message: e.to_string() })
    |                       ^                                      - type must be known at this point
    |
help: consider giving this closure parameter an explicit type
    |
108 |             .map_err(|e: /* Type */| AuthError::DatabaseError { message: e.to_string() })
    |                        ++++++++++++

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:22:9
   |
22 | /         sqlx::query!(
23 | |             r#"
24 | |             INSERT INTO roles (
25 | |                 id, tenant_id, organization_id, name, description,
...  |
43 | |         .execute(&self.pool)
44 | |         .await
   | |______________^ cannot infer type

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:45:19
   |
45 |         .map_err(|e| AuthError::DatabaseError { message: e.to_string() })?;
   |                   ^                                      - type must be known at this point
   |
help: consider giving this closure parameter an explicit type
   |
45 |         .map_err(|e: /* Type */| AuthError::DatabaseError { message: e.to_string() })?;
   |                    ++++++++++++

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:71:22
   |
71 |           let result = sqlx::query!(
   |  ______________________^
72 | |             "DELETE FROM roles WHERE id = ? AND tenant_id = ?",
73 | |             id.to_string(),
74 | |             tenant_id.to_string()
75 | |         )
76 | |         .execute(&self.pool)
77 | |         .await
   | |______________^ cannot infer type

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:78:19
   |
78 |         .map_err(|e| AuthError::DatabaseError { message: e.to_string() })?;
   |                   ^                                      - type must be known at this point
   |
help: consider giving this closure parameter an explicit type
   |
78 |         .map_err(|e: /* Type */| AuthError::DatabaseError { message: e.to_string() })?;
   |                    ++++++++++++

error[E0282]: type annotations needed
  --> crates/auth-db/src/repositories/authorization/role_repository.rs:87:19
   |
87 |           let rec = sqlx::query!(
   |  ___________________^
88 | |             r#"
89 | |             SELECT id, tenant_id, organization_id, name, description,
90 | |                    parent_role_id, is_system_role, scope, metadata, constraints,
...  |
98 | |         .fetch_optional(&self.pool)
99 | |         .await
   | |______________^ cannot infer type

error[E0282]: type annotations needed
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:100:19
    |
100 |         .map_err(|e| AuthError::DatabaseError { message: e.to_string() })?;
    |                   ^                                      - type must be known at this point
    |
help: consider giving this closure parameter an explicit type
    |
100 |         .map_err(|e: /* Type */| AuthError::DatabaseError { message: e.to_string() })?;
    |                    ++++++++++++

error[E0277]: the size for values of type `str` cannot be known at compilation time
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:111:62
    |
111 |                 parent_role_id: row.parent_role_id.and_then(|i| Uuid::parse_str(&i).ok()),
    |                                                              ^ doesn't have a size known at compile-time
    |
    = help: the trait `Sized` is not implemented for `str`
    = note: all function arguments must have a statically known size

error[E0277]: the size for values of type `str` cannot be known at compilation time
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:115:64
    |
115 |                 organization_id: row.organization_id.and_then(|i| Uuid::parse_str(&i).ok()),
    |                                                                ^ doesn't have a size known at compile-time
    |
    = help: the trait `Sized` is not implemented for `str`
    = note: all function arguments must have a statically known size

error[E0282]: type annotations needed
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:132:9
    |
132 | /         sqlx::query!(
133 | |             "INSERT INTO role_permissions (role_id, permission_id) VALUES (?, ?)",
134 | |             role_id.to_string(),
135 | |             permission_id.to_string()
136 | |         )
137 | |         .execute(&self.pool)
138 | |         .await
    | |______________^ cannot infer type

error[E0282]: type annotations needed
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:139:19
    |
139 |         .map_err(|e| AuthError::DatabaseError { message: e.to_string() })?;
    |                   ^                                      - type must be known at this point
    |
help: consider giving this closure parameter an explicit type
    |
139 |         .map_err(|e: /* Type */| AuthError::DatabaseError { message: e.to_string() })?;
    |                    ++++++++++++

warning: unused variable: `tenant_id`
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:126:26
    |
126 |     async fn list(&self, tenant_id: Uuid) -> Result<Vec<Role>, AuthError> {
    |                          ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_tenant_id`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `tenant_id`
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:148:34
    |
148 |     async fn find_by_name(&self, tenant_id: Uuid, name: &str) -> Result<Option<Role>, AuthError> {
    |                                  ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_tenant_id`

warning: unused variable: `name`
   --> crates/auth-db/src/repositories/authorization/role_repository.rs:148:51
    |
148 |     async fn find_by_name(&self, tenant_id: Uuid, name: &str) -> Result<Option<Role>, AuthError> {
    |                                                   ^^^^ help: if this is intentional, prefix it with an underscore: `_name`

Some errors have detailed explanations: E0277, E0282, E0308, E0407, E0599.
For more information about an error, try `rustc --explain E0277`.
warning: `auth-db` (lib) generated 4 warnings
error: could not compile `auth-db` (lib) due to 53 previous errors; 4 warnings emitted
